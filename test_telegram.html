<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Telegram</title>
</head>
<body>
    <h1>–¢–µ—Å—Ç –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≤ Telegram</h1>
    
    <form id="test-form">
        <input type="tel" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" value="+48123456789" required>
        <input type="email" id="email" placeholder="Email" value="test@example.com">
        <textarea id="message" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è" value="–¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"></textarea>
        <button type="submit">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ç–µ—Å—Ç</button>
    </form>
    
    <div id="result"></div>

    <script>
        const TELEGRAM_BOT_TOKEN = '8007889504:AAESFASDeT0njLEczDDpO__vENkVJd5d340';
        const TELEGRAM_CHAT_ID = '7364136001';

        async function sendToTelegram({ phone, email, message, timestamp, source }) {
            console.log('üì§ sendToTelegram –≤–∏–∫–ª–∏–∫–∞–Ω–æ –∑ –¥–∞–Ω–∏–º–∏:', { phone, email, message, timestamp, source });
            
            const text = `\nüìû –ù–æ–≤–∏–π –∑–∞–ø–∏—Ç –Ω–∞ –¥–∑–≤—ñ–Ω–æ–∫\n-------------------------\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\nEmail: ${email || '–ù–µ –≤–∫–∞–∑–∞–Ω–æ'}\n–ö–æ–º–µ–Ω—Ç–∞—Ä: ${message || '–ë–µ–∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è'}\n–ß–∞—Å: ${timestamp || new Date().toLocaleString('uk-UA')}\n–î–∂–µ—Ä–µ–ª–æ: ${source || 'Sushi Club Website'}`.trim();

            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            console.log('üåê URL –¥–ª—è –∑–∞–ø–∏—Ç—É:', url);

            try {
                console.log('üì° –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ fetch –∑–∞–ø–∏—Ç...');
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: text,
                        parse_mode: 'HTML'
                    })
                });

                console.log('üì• –û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å, —Å—Ç–∞—Ç—É—Å:', response.status);
                const data = await response.json();
                console.log('üìã –í—ñ–¥–ø–æ–≤—ñ–¥—å Telegram:', data);

                if (!data.ok) {
                    throw new Error(data.description || '–ü–æ–º–∏–ª–∫–∞ Telegram API');
                }

                return true;
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
                return false;
            }
        }

        document.getElementById('test-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            
            console.log('üéØ –¢–µ—Å—Ç–æ–≤–∞ —Ñ–æ—Ä–º–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∞!');
            
            const result = await sendToTelegram({
                phone: phone,
                email: email,
                message: message,
                timestamp: new Date().toLocaleString('uk-UA'),
                source: '–¢–µ—Å—Ç–æ–≤–∞ —Ñ–æ—Ä–º–∞'
            });
            
            document.getElementById('result').innerHTML = result ? 
                '<p style="color: green;">‚úÖ –£—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ!</p>' : 
                '<p style="color: red;">‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏</p>';
        });
    </script>
</body>
</html> 