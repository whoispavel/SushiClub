// Language data object
const languageData = {
    en: {
        'hero-title': 'SUSHI MENU',,
        'hero-subtitle': 'Authentic Japanese flavors delivered to your table',,
        'cta-button': 'Call Us',,
        'menu-title': 'Our Menu',,
        'discount-title': 'Get 15% Discount',,
        'discount-subtitle': 'Leave your contacts and get a personal discount on your first order',,
        'discount-button': 'Get 15% Discount',,
        'contact-title': 'Contacts',,
        'follow-title': 'Follow Us',,
        'address': 'Szczytnicka 54/1D, 50-382 Wrocław',,
        'copyright': '© 2024 Sushi Club. All rights reserved.',,
        'name-placeholder': 'Your name',,
        'email-placeholder': 'Your email',,
        'menu-item-1-title': 'Set 1',
        'menu-item-1-desc': 'Futomak  pieczony łosoś (6 pieces) <br>Hosomaki grilled salmon (8 pieces)',
        'menu-item-1-subtitle': '1 free roll with every set.',
        'menu-item-1-price': 'Price: 67 zł',
        'menu-item-2-title': 'Set 2',
        'menu-item-2-desc': 'Futomak łosoś surowy (6 pieces) <br>Hosomaki raw salmon (8 pieces) <br>1 free roll (6 pieces)',
        'menu-item-2-subtitle': '1 free roll with every set.',
        'menu-item-2-price': 'Price: 67 zł',
        'menu-item-3-title': 'Set 3',
        'menu-item-3-desc': 'California raw tuna wrapped in mango (8 pieces) <br>Futomak łosoś pieczony (6 pieces) <br>Hosomaki cucumber (8 pieces)',
        'menu-item-3-subtitle': '1 free roll with every set.',
        'menu-item-3-price': 'Price: 137 zł',
        'menu-item-4-title': 'Set 4',
        'menu-item-4-desc': 'Philadelphia mango z łososiem opalony z sosem unagi (8 pieces)<br>California krewetka okładaną tatarem (10 pieces)<br>Futomak tilapia tempura (6 pieces)<br>Hosomaki cucumber (8 pieces)<br>Hosomaki sweet potato (8 pieces)',
        'menu-item-4-subtitle': '1 free roll with every set.',
        'menu-item-4-price': 'Price: 197 zł',
        'menu-item-5-title': 'Set 5',
        'menu-item-5-desc': 'California eel in green masago (8 pieces)<br>Futomaki surimi salad in tempura (6 pieces)<br> Futomaki cooked shrimp (6 pieces) <br>Hosomaki mango (8 pieces)<br>Hosomaki avocado (8 pieces)  <br>Hosomaki salmon (8 pieces)',
        'menu-item-5-subtitle': '1 free roll with every set.',
        'menu-item-5-price': 'Price: 223 zł',
        'menu-item-6-title': 'Set 6',
        'menu-item-6-desc': 'Vulkan łosoś pieczony (2 sztuki)<br>nori, ryż, serek Philadelphia, awokado, czapeczki serowe, z sosem słodkim <br><br>Vulkan tatar z łososia (2 sztuki)<br>nori, ryż, łosoś, por, olej sezamowy <br><br>Vulkan krabowy (2 sztuki)<br>nori, ryż, serek philadelphia, krewetka gotowana, masago<br><br>Nigiri łosoś (2 sztuki) <br>Nigiri tuńczyk (2 sztuki)<br>Nigiri węgorz (2 sztuki)',
        'menu-item-6-subtitle': '1 free roll with every set.',
        'menu-item-6-price': 'Price: 127 zł',
        'menu-item-7-title': 'Set 7',
        'menu-item-7-desc': 'Futomaki tatar z łososia (12 sztuk)<br>﻿﻿﻿Futomaki łosoś (12 sztuk)<br>Futomaki surimi salad in tempura (12 sztuk)<br>﻿﻿﻿Futomaki krewetka (12 sztuk)<br>﻿﻿﻿Futomaki tunczyk (12 sztuk)<br>﻿﻿﻿Futomaki wegetarianski (tofu, kampio, ogórek) (12 sztuk)',
        'menu-item-7-price': 'Price: 395 zł',
        'menu-item-8-title': 'Set 8',
        'menu-item-8-desc': 'Philadelphia okładana tatarem opalonym<br>California pieczony łosoś okładany mango<br>Philadelphia łosoś<br>California tuńczyk w masago zielony<br>California batat okładana gruszka<br>California cukinia okładana boczkiem opalonym<br>Philadelphia węgorzem<br>California tunczyk w masago zielony<br>California batat oktadana gruszka<br>California cukinia oktadana boczkiem opalonym',
        'menu-item-8-subtitle': '1 free roll with every set.',
        'menu-item-8-price': 'Price: 377 zł',
        'menu-item-9-title': 'Set 9',
        'menu-item-9-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-9-subtitle': '1 free roll with every set.',
        'menu-item-9-price': 'Price: 57 zł',
        'menu-item-10-title': 'Set 10',
        'menu-item-10-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-10-subtitle': '1 free roll with every set.',
        'menu-item-10-price': 'Price: 57 zł',
        'menu-item-11-title': 'Set 11',
        'menu-item-11-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-11-subtitle': '1 free roll with every set.',
        'menu-item-11-price': 'Price: 59 zł',
        'menu-item-12-title': 'Set 12',
        'menu-item-12-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-12-subtitle': '1 free roll with every set.',
        'menu-item-12-price': 'Price: 57 zł',
        'menu-item-13-title': 'Set 13',
        'menu-item-13-desc': 'Futomaki tofu (6 pieces)<br>Kalifornia cukinia w ogórkach (10 pieces)<br>Philadelphia z ogórkiem okładana goma (10 pieces) <br>Hosomaki kampyo (8 pieces)<br>Hosomaki mango (8 pieces)<br>Nigiri z awokado (2 sztuki)',
        'menu-item-13-price': 'Price: 167 zł',
        'menu-item-14-title': 'Set 14',
        'menu-item-14-desc': 'Hosomaki cucumber<br> Hosomaki kanpyo<br> Hosomaki mango<br> Hosomaki avocado<br> Hosomaki sweet potato<br> Hosomaki salmon<br> Hosomaki tuńczyk<br> Hosomaki salmon pieczony<br> Hosomaki krewetka<br> Hosomaki węgorzem',
        'menu-item-14-price': 'Price: 167 zł',
        'menu-item-15-title': 'Set 15',
        'menu-item-15-desc': 'California Rainbow (łosoś tuńczyk, krewetka) (10 pieces)',
        'menu-item-15-subtitle': '1 free roll with every set.',
        'menu-item-15-price': 'Price: 57 zł',
        'menu-item-16-title': 'Set 16',
        'menu-item-16-desc': 'California kurczak panko okładana boczkiem',
        'menu-item-16-subtitle': '1 free roll with every set.',
        'menu-item-16-price': 'Price: 57 zł',
        'menu-item-17-title': 'Set 17',
        'menu-item-17-desc': 'Philadelphia tatar z losośia',
        'menu-item-17-subtitle': '1 free roll with every set.',
        'menu-item-17-price': 'Price: 57 zł',
        'menu-item-18-title': 'Set 18',
        'menu-item-18-desc': 'California pieczony łosoś okładaną mango',
        'menu-item-18-subtitle': '1 free roll with every set.',
        'menu-item-18-price': 'Price: 57 zł',
        'menu-item-19-title': 'Set 19',
        'menu-item-19-desc': 'Philadelphia  krewetka',
        'menu-item-19-subtitle': '1 free roll with every set.',
        'menu-item-19-price': 'Price: 57 zł',
        'menu-item-20-title': 'Set 20',
        'menu-item-20-desc': 'Philadelphia losoś',
        'menu-item-20-subtitle': '1 free roll with every set.',
        'menu-item-20-price': 'Price: 57 zł',
        'menu-item-21-title': 'Set 21',
        'menu-item-21-desc': '(nori, ryż, łosoś, serek philadelphia, masago, sos sriracha, panko,<br>maka tempura, awokado, ogórek).',
        'menu-item-21-price': 'Price: 69 zł',
        'menu-item-22-title': 'Set 22',
        'menu-item-22-desc': '(nori, ryż, krewetka + mango, sos słodkie chilli, ser cheddar,<br>ogórek, panko, maka tempura).',
        'menu-item-22-price': 'Price: 69 zł',
        'menu-item-23-title': 'Set 23',
        'menu-item-23-desc': '(nori, ryż, batat, kampyo, ogórek, serek philadelphia,<br>mango, panko, maka tempura).',
        'menu-item-23-price': 'Price: 59 zł',
        'menu-item-24-title': 'Set 24',
        'menu-item-24-desc': 'tatar z łososia 150 gram (łosoś, por, olej sezamowy). 35 zł <br>Sałatka goma (150 gram). 17 zł <br>Pierożki gyoza z mięsem + sos sweet chilli (6 sztuk + 1 sztuka). 25 zł <br>Pierożki gyoza wegetariańskie + sos sweet chilli (6 sztuk + 1 sztuka). 23 zł',
        'menu-item-25-title': 'Set 25',
        'menu-item-25-desc': 'Kimchi (kapusta pekińska, por, marchew, biała rzodkiew, imbir, czosnek, chilli (150 gram). 17 zł <br>Kalmary (6 sztuk + sos sweet chilli). 29 zł <br>Krewetka (6 sztuk + sos ma słodki). 29 zł',
        'menu-item-26-title': 'Set 26',
        'menu-item-26-desc': 'Herbata 12 zł<br>Kawa 17 zł',
        'menu-item-27-title': 'Set 27',
        'menu-item-27-desc': 'pałeczki. 2 zł<br>pomocnik do pałeczek. 2 zł<br>imbir. 2 zł<br>wasabi 2 zł'
    },
    pl: {
        'hero-title': 'MENU SUSHI',,,
        'hero-subtitle': 'Autentyczne japońskie smaki dostarczone do Twojego stołu',,,
        'cta-button': 'Zadzwoń',,,
        'menu-title': 'Nasze Menu',,,
        'discount-title': 'Otrzymaj 15% zniżki',,,
        'discount-subtitle': 'Zostaw swoje kontakty i otrzymaj personalną zniżkę na pierwsze zamówienie',,,
        'discount-button': 'Otrzymaj 15% zniżki',,,
        'contact-title': 'Kontakt',,,
        'follow-title': 'Śledź nas',,,
        'address': 'Szczytnicka 54/1D, 50-382 Wrocław',,,
        'copyright': '© 2024 Sushi Club. Wszystkie prawa zastrzeżone.',,,
        'name-placeholder': 'Twoje imię',,,
        'email-placeholder': 'Twój email',,,
        'menu-item-1-title': 'Zestaw 1',
        'menu-item-1-desc': 'Futomak  pieczony łosoś (6 sztuk) <br>Hosomaki pieczony łosoś (8 sztuk)',
        'menu-item-1-subtitle': 'Do każdego zestawu 1 rolka gratis.',
        'menu-item-1-price': 'Cena: 67 zł',
        'menu-item-2-title': 'Zestaw 2',
        'menu-item-2-desc': 'Futomak łosoś surowy (6 sztuk) <br>Hosomaki łosoś surowy (8 sztuk) <br>1 rolka gratis (6 sztuk)',
        'menu-item-2-subtitle': 'Do każdego zestawu 1 rolka gratis.',
        'menu-item-2-price': 'Cena: 67 zł',
        'menu-item-3-title': 'Zestaw 3',
        'menu-item-3-desc': 'California tuńczyk surowy okładany w mango (8 sztuk) <br>Futomak łosoś pieczony (6 sztuk) <br>Hosomaki ogórek (8 sztuk)',
        'menu-item-3-subtitle': 'Do każdego zestawu 1 rolka gratis.',
        'menu-item-3-price': 'Cena: 137 zł',
        'menu-item-4-title': 'Zestaw 4',
        'menu-item-4-desc': 'Philadelphia mango z łososiem opalony z sosem unagi (8 sztuk)<br>California krewetka okładaną tatarem (10 sztuk)<br>Futomak tilapia tempura (6 sztuk)<br>Hosomaki ogórek (8 sztuk)<br>Hosomaki batat (8 sztuk)',
        'menu-item-4-subtitle': 'Do każdego zestawu 1 rolka gratis.',
        'menu-item-4-price': 'Cena: 197 zł',
        'menu-item-5-title': 'Zestaw 5',
        'menu-item-5-desc': 'California węgorz w zielone masago (8 sztuk)<br>Futomaki sałatka surimi w tempurze (6 sztuk)<br> Futomaki krewetka gotowana (6 sztuk) <br>Hosomaki mango (8 sztuk)<br>Hosomaki awokado (8 sztuk)  <br>Hosomaki łosoś (8 sztuk)',
        'menu-item-5-subtitle': 'Do każdego zestawu 1 rolka gratis.',
        'menu-item-5-price': 'Cena: 223 zł',
        'menu-item-6-title': 'Zestaw 6',
        'menu-item-6-desc': 'Vulkan łosoś pieczony (2 sztuki)<br>nori, ryż, serek Philadelphia, awokado, czapeczki serowe, z sosem słodkim <br><br>Vulkan tatar z łososia (2 sztuki)<br>nori, ryż, łosoś, por, olej sezamowy <br><br>Vulkan krabowy (2 sztuki)<br>nori, ryż, serek philadelphia, krewetka gotowana, masago<br><br>Nigiri łosoś (2 sztuki) <br>Nigiri tuńczyk (2 sztuki)<br>Nigiri węgorz (2 sztuki)',
        'menu-item-6-subtitle': 'Do każdego zestawu 1 rolka gratis.',
        'menu-item-6-price': 'Cena: 127 zł',
        'menu-item-7-title': 'Futo set',
        'menu-item-7-desc': 'Futomaki tatar z łososia (12 sztuk)<br>﻿﻿﻿Futomaki łosoś (12 sztuk)<br>Futomaki sałatka surimi w tempurze (12 sztuk)<br>﻿﻿﻿Futomaki krewetka (12 sztuk)<br>﻿﻿﻿Futomaki tunczyk (12 sztuk)<br>﻿﻿﻿Futomaki wegetarianski (tofu, kampio, ogórek) (12 sztuk)',
        'menu-item-7-price': 'Cena: 395 zł',
        'menu-item-8-title': 'California set',
        'menu-item-8-desc': 'Philadelphia okładana tatarem opalonym<br>California pieczony łosoś okładany mango<br>Philadelphia łosoś<br>California tuńczyk w masago zielony<br>California batat okładana gruszka<br>California cukinia okładana boczkiem opalonym<br>Philadelphia węgorzem<br>California tunczyk w masago zielony<br>California batat oktadana gruszka<br>California cukinia oktadana boczkiem opalonym',
        'menu-item-8-subtitle': 'Każda California – 10 sztuk.',
        'menu-item-8-price': 'Cena: 377 zł',
        'menu-item-9-title': 'PHILADELPHIA',
        'menu-item-9-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-9-subtitle': 'Philadelphia tuńczyk',
        'menu-item-9-price': 'Cena: 57 zł',
        'menu-item-10-title': 'PHILADELPHIA',
        'menu-item-10-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-10-subtitle': 'Philadelphia krewetka',
        'menu-item-10-price': 'Cena: 57 zł',
        'menu-item-11-title': 'PHILADELPHIA',
        'menu-item-11-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-11-subtitle': 'Philadelphia węgorz',
        'menu-item-11-price': 'Cena: 59 zł',
        'menu-item-12-title': 'PHILADELPHIA',
        'menu-item-12-desc': 'serek Philadelphia, masago, mango, łosoś',
        'menu-item-12-subtitle': 'Philadelphia łosoś',
        'menu-item-12-price': 'Cena: 57 zł',
        'menu-item-13-title': 'Wegetariański set',
        'menu-item-13-desc': 'Futomaki tofu (6 sztuk)<br>Kalifornia cukinia w ogórkach (10 sztuk)<br>Philadelphia z ogórkiem okładana goma (10 sztuk) <br>Hosomaki kampyo (8 sztuk)<br>Hosomaki mango (8 sztuk)<br>Nigiri z awokado (2 sztuki)',
        'menu-item-13-price': 'Cena: 167 zł',
        'menu-item-14-title': 'Hosomaki set',
        'menu-item-14-desc': 'Hosomaki ogórek<br> Hosomaki kanpyo<br> Hosomaki mango<br> Hosomaki awokado<br> Hosomaki batat<br> Hosomaki łosoś<br> Hosomaki tuńczyk<br> Hosomaki łosoś pieczony<br> Hosomaki krewetka<br> Hosomaki węgorzem',
        'menu-item-14-price': 'Cena: 167 zł',
        'menu-item-15-title': 'ROLKI POJEDYNCZE',
        'menu-item-15-desc': 'California Rainbow (łosoś tuńczyk, krewetka) (10 sztuk)',
        'menu-item-15-subtitle': '10 sztuk',
        'menu-item-15-price': 'Cena: 57 zł',
        'menu-item-16-title': 'ROLKI POJEDYNCZE',
        'menu-item-16-desc': 'California kurczak panko okładana boczkiem',
        'menu-item-16-subtitle': '10 sztuk',
        'menu-item-16-price': 'Cena: 57 zł',
        'menu-item-17-title': 'ROLKI POJEDYNCZE',
        'menu-item-17-desc': 'Philadelphia tatar z losośia',
        'menu-item-17-subtitle': '10 sztuk',
        'menu-item-17-price': 'Cena: 57 zł',
        'menu-item-18-title': 'ROLKI POJEDYNCZE',
        'menu-item-18-desc': 'California pieczony łosoś okładaną mango',
        'menu-item-18-subtitle': '10 sztuk',
        'menu-item-18-price': 'Cena: 57 zł',
        'menu-item-19-title': 'ROLKI POJEDYNCZE',
        'menu-item-19-desc': 'Philadelphia  krewetka',
        'menu-item-19-subtitle': '10 sztuk',
        'menu-item-19-price': 'Cena: 57 zł',
        'menu-item-20-title': 'ROLKI POJEDYNCZE',
        'menu-item-20-desc': 'Philadelphia losoś',
        'menu-item-20-subtitle': '10 sztuk',
        'menu-item-20-price': 'Cena: 57 zł',
        'menu-item-21-title': 'Sushi burger łosoś',
        'menu-item-21-desc': '(nori, ryż, łosoś, serek philadelphia, masago, sos sriracha, panko,<br>maka tempura, awokado, ogórek).',
        'menu-item-21-price': 'Cena: 69 zł',
        'menu-item-22-title': 'Sushi burger krewetka',
        'menu-item-22-desc': '(nori, ryż, krewetka + mango, sos słodkie chilli, ser cheddar,<br>ogórek, panko, maka tempura).',
        'menu-item-22-price': 'Cena: 69 zł',
        'menu-item-23-title': 'Sushi burger wegetariański',
        'menu-item-23-desc': '(nori, ryż, batat, kampyo, ogórek, serek philadelphia,<br>mango, panko, maka tempura).',
        'menu-item-23-price': 'Cena: 59 zł',
        'menu-item-24-title': 'PRZYSTAWKI',
        'menu-item-24-desc': 'tatar z łososia 150 gram (łosoś, por, olej sezamowy). 35 zł <br>Sałatka goma (150 gram). 17 zł <br>Pierożki gyoza z mięsem + sos sweet chilli (6 sztuk + 1 sztuka). 25 zł <br>Pierożki gyoza wegetariańskie + sos sweet chilli (6 sztuk + 1 sztuka). 23 zł',
        'menu-item-25-title': 'PRZYSTAWKI',
        'menu-item-25-desc': 'Kimchi (kapusta pekińska, por, marchew, biała rzodkiew, imbir, czosnek, chilli (150 gram). 17 zł <br>Kalmary (6 sztuk + sos sweet chilli). 29 zł <br>Krewetka (6 sztuk + sos ma słodki). 29 zł',
        'menu-item-26-title': 'NAPOJE',
        'menu-item-26-desc': 'Herbata 12 zł<br>Kawa 17 zł',
        'menu-item-27-title': 'DODATKI',
        'menu-item-27-desc': 'pałeczki. 2 zł<br>pomocnik do pałeczek. 2 zł<br>imbir. 2 zł<br>wasabi 2 zł'
    }
};

// Current language state
let currentLanguage = 'pl';

// DOM elements
const languageButtons = document.querySelectorAll('.lang-btn');
const discountForm = document.getElementById('discountForm');

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguageSwitcher();
    initializeFormHandling();
    initializeImageLoading();
    initializeSmoothScrolling();
});

// Language switcher functionality
function initializeLanguageSwitcher() {
    languageButtons.forEach(button => {
        button.addEventListener('click', function() {
            const selectedLanguage = this.getAttribute('data-lang');
            switchLanguage(selectedLanguage);
            updateActiveLanguageButton(this);
        });
    });
}

function switchLanguage(language) {
    if (!languageData[language]) {
        console.error(`Language ${language} not found`);
        return;
    }
    
    currentLanguage = language;
    
    // Update document language
    document.documentElement.lang = getLanguageCode(language);
    
    // Update all text elements
    const elementsToTranslate = document.querySelectorAll('[data-key]');
    elementsToTranslate.forEach(element => {
        const key = element.getAttribute('data-key');
        if (languageData[language][key]) {
            element.textContent = languageData[language][key];
        }
    });
    
    // Update form placeholders
    updateFormPlaceholders(language);
    
    // Save language preference
    localStorage.setItem('preferredLanguage', language);
}

function updateFormPlaceholders(language) {
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    
    if (nameInput && languageData[language]['name-placeholder']) {
        nameInput.placeholder = languageData[language]['name-placeholder'];
    }
    
    if (emailInput && languageData[language]['email-placeholder']) {
        emailInput.placeholder = languageData[language]['email-placeholder'];
    }
}

function updateActiveLanguageButton(activeButton) {
    languageButtons.forEach(button => {
        button.classList.remove('active');
    });
    activeButton.classList.add('active');
}

function getLanguageCode(language) {
    const languageCodes = {
        'en': 'en',
        'pl': 'pl'
    };
    return languageCodes[language] || 'pl';
}

// Form handling
function initializeFormHandling() {
    if (discountForm) {
        discountForm.addEventListener('submit', handleFormSubmission);
    }
}

function handleFormSubmission(event) {
    event.preventDefault();
    
    const formData = new FormData(discountForm);
    const name = formData.get('name').trim();
    const email = formData.get('email').trim();
    
    // Basic validation
    if (!name || name.length < 2) {
        showNotification('Please enter a valid name', 'error');
        return;
    }
    
    if (!isValidEmail(email)) {
        showNotification('Please enter a valid email address', 'error');
        return;
    }
    
    // Submit to Google Sheets
    const submitButton = discountForm.querySelector('.discount-button');
    const originalText = submitButton.innerHTML;
    
    submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
    submitButton.disabled = true;
    
    // Submit data to Google Sheets
    submitToGoogleSheets(name, email)
        .then(() => {
            showNotification('Thank you! Your 15% discount has been sent to your email.', 'success');
            discountForm.reset();
        })
        .catch((error) => {
            console.error('Error submitting to Google Sheets:', error);
            showNotification('There was an error processing your request. Please try again.', 'error');
        })
        .finally(() => {
            submitButton.innerHTML = originalText;
            submitButton.disabled = false;
        });
}

async function submitToGoogleSheets(name, email) {
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwYourScriptIdHere/exec';
    const timestamp = new Date().toLocaleString();
    
    const formData = new FormData();
    formData.append('name', name);
    formData.append('email', email);
    formData.append('timestamp', timestamp);
    formData.append('language', currentLanguage);
    
    const response = await fetch(scriptURL, {
        method: 'POST',
        body: formData
    });
    
    if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    return response.text();
}

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function showNotification(message, type = 'info') {
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
            <span>${message}</span>
        </div>
    `;
    
    // Add notification styles
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        z-index: 1000;
        transform: translateX(400px);
        transition: transform 0.3s ease;
        max-width: 350px;
    `;
    
    // Add to DOM
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    // Remove after delay
    setTimeout(() => {
        notification.style.transform = 'translateX(400px)';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 4000);
}

// Image loading optimization
function initializeImageLoading() {
    const images = document.querySelectorAll('.menu-item-image img');
    
    // Add loading class initially
    images.forEach(img => {
        img.classList.add('loading');
        
        if (img.complete && img.naturalHeight !== 0) {
            img.classList.add('loaded');
            img.classList.remove('loading');
        } else {
            img.addEventListener('load', function() {
                this.classList.add('loaded');
                this.classList.remove('loading');
            });
            
            img.addEventListener('error', function() {
                this.classList.remove('loading');
                this.alt = 'Image failed to load';
                console.warn('Failed to load image:', this.src);
            });
        }
    });
}

// Smooth scrolling for anchor links
function initializeSmoothScrolling() {
    const links = document.querySelectorAll('a[href^="#"]');
    
    links.forEach(link => {
        link.addEventListener('click', function(event) {
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                event.preventDefault();
                
                const headerOffset = 80;
                const elementPosition = targetElement.offsetTop;
                const offsetPosition = elementPosition - headerOffset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Load saved language preference
document.addEventListener('DOMContentLoaded', function() {
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage && languageData[savedLanguage]) {
        const languageButton = document.querySelector(`[data-lang="${savedLanguage}"]`);
        if (languageButton) {
            switchLanguage(savedLanguage);
            updateActiveLanguageButton(languageButton);
        }
    } else {
        // Default to Polish if no saved preference
        const polishButton = document.querySelector(`[data-lang="pl"]`);
        if (polishButton) {
            switchLanguage('pl');
            updateActiveLanguageButton(polishButton);
        }
    }
});

// Performance optimization: Intersection Observer for animations
function initializeScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);
    
    // Observe menu items for scroll animations
    const menuItems = document.querySelectorAll('.menu-item');
    menuItems.forEach(item => {
        observer.observe(item);
    });
}

// Initialize scroll animations when DOM is loaded
document.addEventListener('DOMContentLoaded', initializeScrollAnimations);

// Handle phone link clicks (for analytics/tracking)
document.addEventListener('click', function(event) {
    if (event.target.matches('a[href^="tel:"]')) {
        // Track phone click event
        console.log('Phone number clicked:', event.target.href);
        
        // You can add analytics tracking here
        // Example: gtag('event', 'phone_click', { 'phone_number': event.target.href });
    }
});

// Accessibility improvements
document.addEventListener('keydown', function(event) {
    // Handle escape key to close any open modals/dropdowns
    if (event.key === 'Escape') {
        // Close any notifications
        const notifications = document.querySelectorAll('.notification');
        notifications.forEach(notification => {
            if (notification.parentNode) {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }
        });
    }
});

// Handle form input focus for better UX
document.addEventListener('focus', function(event) {
    if (event.target.matches('input')) {
        event.target.parentNode.classList.add('focused');
    }
}, true);

document.addEventListener('blur', function(event) {
    if (event.target.matches('input')) {
        event.target.parentNode.classList.remove('focused');
    }
}, true);
